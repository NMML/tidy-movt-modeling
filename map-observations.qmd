---
title: "Mapping Telemetry Observations"
---

```{r}
#| include: false
akbs_locs <- readRDS(here::here("shared_cache","akbs_locs_filt.rds"))
```

## Mapping in R



## Choosing a Projection

It's important that your spatial coordinates be projected. Geographic data
that is represented in latitude and longitude coordinates cannot be used
for animal movement modeling. Ideally, you will already have a good
understanding of your study area and will have determined your target
CRS. In this situation, you can use the `sf::st_transform()` function to
transform your coordinates into this new projection.

If you are unsure of what CRS might be a good choice for your data, the
`crsuggest` package can provide some insight. We'll use this package to
find a sensible projection for our Alaska bearded seal data. To help narrow
the options, we can specify that we want to keep the corresponding geographic
coordinate system as WGS 84 by passing the `4326` EPSG code to the `gcs`
argument. We can also specify that we want our units to be in meters.

```{r}
#| warning: false
#| message: false
library(sf)
library(crsuggest)

top_crs <- suggest_crs(akbs_locs,
            gcs = 4326,
            units = "m")

top_crs
```
 The first CRS suggested is the `r top_crs$crs_name[1]`. So, let's go ahead
 and transform our data and see what this projection looks like on a map with
 our data. As mentioned above, we'll use the `sf::st_transform()` function
 to do the transformation.
 
```{r}
#|: message: false
#|: warning: false
library(ggplot2)
library(rnaturalearth)
library(rnaturalearthdata)

world <- ne_countries(scale = "medium",returnclass = "sf")
crs_code <- as.integer(top_crs$crs_code[1])
 
locs <- akbs_locs %>% sf::st_transform(crs_code)
world <- world %>% sf::st_transform(crs_code)

ggplot() + geom_sf(data = world) +
  geom_sf(data = locs) + 
  coord_sf(
    xlim = sf::st_bbox(locs)[c(1,3)],
    ylim = sf::st_bbox(locs)[c(2,4)])
```
 


## Map Observations with `ggplot2`


